const _0x2689f2=_0xfcfe;(function(_0x1a05e5,_0x1aee50){const _0x19bf19=_0xfcfe,_0x286725=_0x1a05e5();while(!![]){try{const _0x236127=-parseInt(_0x19bf19(0x252))/0x1*(-parseInt(_0x19bf19(0x20c))/0x2)+-parseInt(_0x19bf19(0x1f3))/0x3+-parseInt(_0x19bf19(0x21e))/0x4+parseInt(_0x19bf19(0x1ed))/0x5*(-parseInt(_0x19bf19(0x246))/0x6)+-parseInt(_0x19bf19(0x23c))/0x7*(-parseInt(_0x19bf19(0x1e3))/0x8)+parseInt(_0x19bf19(0x264))/0x9*(-parseInt(_0x19bf19(0x20d))/0xa)+parseInt(_0x19bf19(0x206))/0xb;if(_0x236127===_0x1aee50)break;else _0x286725['push'](_0x286725['shift']());}catch(_0x2aac96){_0x286725['push'](_0x286725['shift']());}}}(_0x3ae2,0x771cb));const API_BASE=_0x2689f2(0x251),LOGIN_ENDPOINT=API_BASE+'/login',SUPERVISOR_CODE=_0x2689f2(0x215);let headersAtt=[],attendanceData=[],headersHw=[],hwafezData=[],currentUser=null,jwtToken=null;const caseMapping={'1':_0x2689f2(0x213),'2':'تأخر\x20أكثر\x20من\x20ساعة\x20أو\x20عدم\x20مهر\x20البصمة\x20صباحاً','3':'خروج\x20مبكر\x20(أو\x20عدم\x20مهر\x20البصمة\x20مساءً)','4':_0x2689f2(0x1f9),'5':_0x2689f2(0x21a)};function normalizeDigits(_0xd17747){const _0x34c3dc=_0x2689f2;return _0xd17747[_0x34c3dc(0x249)](/[٠-٩]/g,_0x3ba386=>_0x34c3dc(0x231)[_0x34c3dc(0x21f)](_0x3ba386));}function _0xfcfe(_0x379e46,_0x3bdb7e){const _0x3ae207=_0x3ae2();return _0xfcfe=function(_0xfcfec,_0x5177c1){_0xfcfec=_0xfcfec-0x1e0;let _0x52007c=_0x3ae207[_0xfcfec];return _0x52007c;},_0xfcfe(_0x379e46,_0x3bdb7e);}document[_0x2689f2(0x204)]('DOMContentLoaded',()=>{const _0x1ece57=_0x2689f2;document['getElementById'](_0x1ece57(0x1e2))[_0x1ece57(0x1f0)]=login,document[_0x1ece57(0x23d)](_0x1ece57(0x240))[_0x1ece57(0x1f0)]=logout,document[_0x1ece57(0x23d)]('aboutBtn')['onclick']=()=>alert('فكرة\x20وإعداد\x20وتصميم\x20عمر\x20عونـي\x20الماضي\x20\x20\x20دائرة\x20الموارد\x20البشرية\x20–\x20فرع\x20اتصالات\x20دمشق'),document[_0x1ece57(0x23d)]('hwafezBtn')[_0x1ece57(0x1f0)]=showHwafez;const _0x3b74bc=localStorage[_0x1ece57(0x238)](_0x1ece57(0x1e5));_0x3b74bc&&(jwtToken=_0x3b74bc,fetchAndRender()[_0x1ece57(0x20f)](()=>{const _0x53dd28=_0x1ece57;typeof window[_0x53dd28(0x22d)]==='function'&&window[_0x53dd28(0x22d)]();})[_0x1ece57(0x202)](logout));});async function login(){const _0x2a75f9=_0x2689f2,_0x1a7185=normalizeDigits(document[_0x2a75f9(0x23d)]('codeInput')[_0x2a75f9(0x243)]['trim']()),_0x3471af=document[_0x2a75f9(0x23d)]('passwordInput')['value'][_0x2a75f9(0x211)]();if(!_0x1a7185||!_0x3471af)return alert(_0x2a75f9(0x263));let _0x118c06;try{const _0x57261c=await fetch(LOGIN_ENDPOINT,{'method':'POST','headers':{'Content-Type':_0x2a75f9(0x266)},'body':JSON['stringify']({'code':_0x1a7185,'pass':_0x3471af})});if(_0x57261c[_0x2a75f9(0x250)]===0x191)return alert(_0x2a75f9(0x239));if(!_0x57261c['ok'])throw new Error(_0x2a75f9(0x229)+_0x57261c[_0x2a75f9(0x250)]+')');_0x118c06=await _0x57261c['json'](),jwtToken=_0x118c06[_0x2a75f9(0x25c)],localStorage['setItem'](_0x2a75f9(0x1e5),jwtToken),currentUser=_0x118c06['user'][_0x2a75f9(0x220)]??_0x118c06['user'][_0x2a75f9(0x21b)],window[_0x2a75f9(0x1f6)]=currentUser,console[_0x2a75f9(0x210)]('✅\x20login\x20successful,\x20currentUser\x20=',currentUser),console[_0x2a75f9(0x210)](_0x2a75f9(0x24c)),window['Capacitor']&&Capacitor[_0x2a75f9(0x232)]()!==_0x2a75f9(0x217)?await initNativePush():await initPush(),typeof window['initNotifications']===_0x2a75f9(0x1fd)&&window[_0x2a75f9(0x22d)](),await fetchAndRender();}catch(_0x4c9772){console['error'](_0x2a75f9(0x24f),_0x4c9772),alert(_0x2a75f9(0x21c)+_0x4c9772[_0x2a75f9(0x201)]);}}async function fetchAndRender(){const _0x2f8b8e=_0x2689f2;if(!jwtToken)return;const _0xae3b1c={'Content-Type':'application/json','Authorization':_0x2f8b8e(0x1ef)+jwtToken},[_0x2f20ef,_0x24fba7,_0x52678a]=await Promise[_0x2f8b8e(0x1eb)]([fetch(API_BASE+_0x2f8b8e(0x1f2),{'headers':_0xae3b1c}),fetch(API_BASE+_0x2f8b8e(0x230),{'headers':_0xae3b1c}),fetch(API_BASE+_0x2f8b8e(0x248),{'headers':_0xae3b1c})]);if(!_0x2f20ef['ok']||!_0x24fba7['ok']||!_0x52678a['ok'])throw new Error(_0x2f8b8e(0x26a));const _0x4e8ed8=await _0x2f20ef[_0x2f8b8e(0x23e)](),_0x1694a9=await _0x24fba7[_0x2f8b8e(0x23e)](),_0x45b034=await _0x52678a[_0x2f8b8e(0x23e)]();headersAtt=_0x4e8ed8[_0x2f8b8e(0x1ee)],attendanceData=_0x4e8ed8[_0x2f8b8e(0x237)],headersHw=_0x1694a9[_0x2f8b8e(0x1ee)],hwafezData=_0x1694a9[_0x2f8b8e(0x237)],currentUser=_0x45b034[_0x2f8b8e(0x25a)]['كود\x20الموظف'],document[_0x2f8b8e(0x23d)](_0x2f8b8e(0x1e0))[_0x2f8b8e(0x254)]['add'](_0x2f8b8e(0x241)),document[_0x2f8b8e(0x23d)](_0x2f8b8e(0x258))['classList']['remove']('hidden'),document[_0x2f8b8e(0x23d)](_0x2f8b8e(0x242))[_0x2f8b8e(0x21d)]=_0x2f8b8e(0x257)+currentUser;currentUser===SUPERVISOR_CODE&&(document[_0x2f8b8e(0x23d)](_0x2f8b8e(0x1e6))[_0x2f8b8e(0x254)]['remove'](_0x2f8b8e(0x241)),document[_0x2f8b8e(0x23d)](_0x2f8b8e(0x255))[_0x2f8b8e(0x1f0)]=sendSupervisorNotification);const _0x1bb6f9=document[_0x2f8b8e(0x23d)]('supervisorNotes'),_0x59e99d=document[_0x2f8b8e(0x23d)](_0x2f8b8e(0x1ff));_0x1bb6f9[_0x2f8b8e(0x243)]=localStorage[_0x2f8b8e(0x238)](_0x2f8b8e(0x261))||'',currentUser===SUPERVISOR_CODE?(_0x1bb6f9[_0x2f8b8e(0x236)](_0x2f8b8e(0x1fc)),_0x59e99d[_0x2f8b8e(0x254)][_0x2f8b8e(0x222)](_0x2f8b8e(0x241)),_0x59e99d['onclick']=()=>{const _0x4856d0=_0x2f8b8e;localStorage['setItem'](_0x4856d0(0x261),_0x1bb6f9[_0x4856d0(0x243)]),alert(_0x4856d0(0x209));}):(_0x1bb6f9[_0x2f8b8e(0x1e8)](_0x2f8b8e(0x1fc),''),_0x59e99d[_0x2f8b8e(0x254)][_0x2f8b8e(0x203)]('hidden')),renderRecords();}function renderRecords(){const _0x16f1e8=_0x2689f2,_0xab44e0={'code':headersAtt[_0x16f1e8(0x21f)](_0x16f1e8(0x24b)),'name':headersAtt[_0x16f1e8(0x21f)](_0x16f1e8(0x1fa)),'status':headersAtt['indexOf'](_0x16f1e8(0x1e7)),'date':headersAtt[_0x16f1e8(0x21f)](_0x16f1e8(0x24a)),'in':headersAtt[_0x16f1e8(0x21f)](_0x16f1e8(0x25f)),'out':headersAtt[_0x16f1e8(0x21f)]('خروج'),'sFrom':headersAtt['indexOf'](_0x16f1e8(0x235)),'sTo':headersAtt[_0x16f1e8(0x21f)]('ساعية\x20(إلى\x20الساعة)'),'mFrom':headersAtt[_0x16f1e8(0x21f)](_0x16f1e8(0x226)),'mTo':headersAtt[_0x16f1e8(0x21f)](_0x16f1e8(0x23a)),'days':headersAtt[_0x16f1e8(0x21f)](_0x16f1e8(0x218)),'notes':headersAtt['indexOf'](_0x16f1e8(0x225)),'adminC':headersAtt[_0x16f1e8(0x21f)](_0x16f1e8(0x212)),'adminR':headersAtt['indexOf'](_0x16f1e8(0x205)),'adminDue':headersAtt[_0x16f1e8(0x21f)](_0x16f1e8(0x22a))},_0x2a6c30=attendanceData[_0x16f1e8(0x1fb)](_0x2a3231=>String(_0x2a3231[_0xab44e0[_0x16f1e8(0x220)]])[_0x16f1e8(0x211)]()===currentUser),_0x24e3e8=document[_0x16f1e8(0x23d)](_0x16f1e8(0x1e9));_0x24e3e8[_0x16f1e8(0x214)]='';if(!_0x2a6c30[_0x16f1e8(0x20e)]){document[_0x16f1e8(0x23d)](_0x16f1e8(0x1fe))[_0x16f1e8(0x254)]['remove'](_0x16f1e8(0x241));return;}document['getElementById']('noDataMsg')['classList'][_0x16f1e8(0x203)](_0x16f1e8(0x241));const _0x43aac0=_0x2a6c30[0x0];document[_0x16f1e8(0x23d)](_0x16f1e8(0x267))['textContent']=_0x43aac0[_0xab44e0[_0x16f1e8(0x259)]]||'--',document['getElementById'](_0x16f1e8(0x1f8))[_0x16f1e8(0x21d)]=_0x43aac0[_0xab44e0[_0x16f1e8(0x1e1)]]||'--',document['getElementById'](_0x16f1e8(0x265))[_0x16f1e8(0x21d)]=_0x43aac0[_0xab44e0[_0x16f1e8(0x268)]]||'--',_0x2a6c30[_0x16f1e8(0x260)](_0x261f12=>{const _0x2f21a9=_0x16f1e8,_0x22e281=document['createElement']('tr');_0x22e281[_0x2f21a9(0x214)]=_0x2f21a9(0x227)+(_0x261f12[_0xab44e0[_0x2f21a9(0x220)]]||'')+_0x2f21a9(0x22e)+(_0x261f12[_0xab44e0[_0x2f21a9(0x223)]]||'')+'</td>\x0a\x20\x20\x20\x20\x20\x20<td\x20class=\x22border\x20px-4\x20py-2\x22>'+(caseMapping[String(_0x261f12[_0xab44e0[_0x2f21a9(0x250)]])[_0x2f21a9(0x211)]()]||'')+'</td>\x0a\x20\x20\x20\x20\x20\x20<td\x20class=\x22border\x20px-4\x20py-2\x22>'+(_0x261f12[_0xab44e0['date']]||'')+'</td>\x0a\x20\x20\x20\x20\x20\x20<td\x20class=\x22border\x20px-4\x20py-2\x22>'+(_0x261f12[_0xab44e0['in']]||'')+_0x2f21a9(0x22e)+(_0x261f12[_0xab44e0[_0x2f21a9(0x24e)]]||'')+_0x2f21a9(0x22e)+(_0x261f12[_0xab44e0[_0x2f21a9(0x245)]]||'')+'</td>\x0a\x20\x20\x20\x20\x20\x20<td\x20class=\x22border\x20px-4\x20py-2\x22>'+(_0x261f12[_0xab44e0[_0x2f21a9(0x22b)]]||'')+'</td>\x0a\x20\x20\x20\x20\x20\x20<td\x20class=\x22border\x20px-4\x20py-2\x22>'+(_0x261f12[_0xab44e0[_0x2f21a9(0x24d)]]||'')+_0x2f21a9(0x22e)+(_0x261f12[_0xab44e0[_0x2f21a9(0x1ec)]]||'')+_0x2f21a9(0x22e)+(_0x261f12[_0xab44e0[_0x2f21a9(0x25d)]]||'')+_0x2f21a9(0x22e)+(_0x261f12[_0xab44e0['notes']]||'')+_0x2f21a9(0x224),_0x24e3e8[_0x2f21a9(0x1f1)](_0x22e281);});}function _0x3ae2(){const _0x3c1a30=['ساعية\x20(من\x20الساعة)','removeAttribute','data','getItem','بيانات\x20الدخول\x20خاطئة','مهمة\x20(إلى\x20الساعة)','hwafezBody','5894EaVFMa','getElementById','json','مهارات\x20التواصل\x20والتفاعل','logoutBtn','hidden','welcomeMsg','value','يرجى\x20إدخال\x20عنوان\x20ونص\x20الإشعار.','sFrom','1025790PawHwa','❌\x20خطأ\x20في\x20إرسال\x20الإشعار:\x20','/me','replace','التاريخ','رقم\x20الموظف','🚀\x20calling\x20initPush()…','mFrom','out','❌\x20login\x20error:','status','https://dwam-app-by-omar.onrender.com/api','295gCdpza','/notify-all','classList','sendPushBtn','❌\x20sendSupervisorNotification\x20error:','مرحباً\x20','records','adminDue','user','hwafezSection','token','days','toggle','دخول','forEach','supervisorNotes','notifTitleInput','يرجى\x20إدخال\x20الكود\x20وكلمة\x20المرور.','657VRiRcN','adminLeavesRemaining','application/json','adminLeavesDue','adminR','حدث\x20خطأ\x20أثناء\x20جلب\x20بيانات\x20الحوافز','Unauthorized','loginSection','adminC','loginBtn','6824CjgVLC','error','jwtToken','pushSection','الحالة','setAttribute','attendanceBody','سنوات\x20الخبرة','all','mTo','10xOudva','headers','Bearer\x20','onclick','appendChild','/attendance','1243785AuveoW','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22border\x20px-4\x20py-2\x22>','</td>\x0a\x20\x20\x20\x20\x20\x20','currentUser','stringify','adminLeavesCounted','عدد\x20مرات\x20التأخر\x20أقل\x20من\x20ساعة\x20(حسم\x20يوم\x20كل\x203\x20تأخيرات)','الاسم','filter','readonly','function','noDataMsg','saveNotesBtn','السويّة\x20الوظيفيّة','message','catch','add','addEventListener','عدد\x20الإجازات\x20الإدارية\x20المتبقية\x20للعامل','14796980XkDYPy','مستوى\x20التأهيل','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22border\x20px-4\x20py-2\x22>','تم\x20حفظ\x20الملاحظة','notifBodyInput','smooth','1428xcCtDf','91990aAUAQY','length','then','log','trim','عدد\x20الإجازات\x20الإدارية\x20المحتسبة\x20للعامل','غياب\x20غير\x20مبرر\x20(بدون\x20إذن\x20رسمي)','innerHTML','35190','createElement','web','عدد\x20الأيام\x20المحتسبة\x20بتقرير\x20الساعيات\x20أو\x20التأخر\x20أقل\x20من\x20ساعة','text','تجميع\x20ساعيات\x20(كل\x20ثماني\x20ساعات\x20يتم\x20احتساب\x20يوم)','كود\x20الموظف','حدث\x20خطأ\x20أثناء\x20تسجيل\x20الدخول:\x20','textContent','1432404SixIgK','indexOf','code','المبادرة\x20والتطوير\x20الذاتي','remove','name','</td>\x0a\x20\x20\x20\x20','ملاحظات','مهمة\x20(من\x20الساعة)','\x0a\x20\x20\x20\x20\x20\x20<td\x20class=\x22border\x20px-4\x20py-2\x22>','noHwafezMsg','خطأ\x20بالخادم\x20عند\x20تسجيل\x20الدخول\x20(','عدد\x20الإجازات\x20الإدارية\x20المستحقة\x20للعامل','sTo','POST','initNotifications','</td>\x0a\x20\x20\x20\x20\x20\x20<td\x20class=\x22border\x20px-4\x20py-2\x22>','اتقان\x20العمل\x20وفعاليته','/hwafez','٠١٢٣٤٥٦٧٨٩','getPlatform','الإلتزام\x20والمسؤولية','removeItem'];_0x3ae2=function(){return _0x3c1a30;};return _0x3ae2();}async function showHwafez(){const _0x3fc033=_0x2689f2;try{const _0x59a80f=await fetch(API_BASE+_0x3fc033(0x230),{'headers':{'Content-Type':'application/json','Authorization':'Bearer\x20'+jwtToken}});if(!_0x59a80f['ok'])throw new Error('فشل\x20جلب\x20بيانات\x20الحوافز');const {headers:_0x508b0f,data:_0x5126b2}=await _0x59a80f[_0x3fc033(0x23e)]();headersHw=_0x508b0f,hwafezData=_0x5126b2,document['getElementById']('hwafezSection')[_0x3fc033(0x254)][_0x3fc033(0x222)](_0x3fc033(0x241));const _0x10f434=document['getElementById'](_0x3fc033(0x23b));_0x10f434[_0x3fc033(0x214)]='',_0x5126b2[_0x3fc033(0x260)](_0x5d97b5=>{const _0x34f068=_0x3fc033,_0x24176f=document[_0x34f068(0x216)]('tr');_0x24176f[_0x34f068(0x214)]=_0x34f068(0x1f4)+(_0x5d97b5[_0x508b0f[_0x34f068(0x21f)](_0x34f068(0x24b))]||'')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22border\x20px-4\x20py-2\x22>'+(_0x5d97b5[_0x508b0f['indexOf'](_0x34f068(0x1fa))]||'')+_0x34f068(0x208)+(_0x5d97b5[_0x508b0f[_0x34f068(0x21f)]('حجم\x20العمل')]||'')+_0x34f068(0x208)+(_0x5d97b5[_0x508b0f[_0x34f068(0x21f)](_0x34f068(0x22f))]||'')+_0x34f068(0x208)+(_0x5d97b5[_0x508b0f[_0x34f068(0x21f)]('المهارات\x20القيادية')]||'')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22border\x20px-4\x20py-2\x22>'+(_0x5d97b5[_0x508b0f[_0x34f068(0x21f)]('مهارة\x20الإدارة\x20الذاتية')]||'')+_0x34f068(0x208)+(_0x5d97b5[_0x508b0f[_0x34f068(0x21f)](_0x34f068(0x23f))]||'')+_0x34f068(0x208)+(_0x5d97b5[_0x508b0f[_0x34f068(0x21f)](_0x34f068(0x221))]||'')+_0x34f068(0x208)+(_0x5d97b5[_0x508b0f[_0x34f068(0x21f)]('الإستقلال\x20والموثوقية')]||'')+_0x34f068(0x208)+(_0x5d97b5[_0x508b0f[_0x34f068(0x21f)](_0x34f068(0x233))]||'')+_0x34f068(0x208)+(_0x5d97b5[_0x508b0f[_0x34f068(0x21f)]('نسبة\x20الدوام\x20الفعلي')]||'')+_0x34f068(0x208)+(_0x5d97b5[_0x508b0f[_0x34f068(0x21f)](_0x34f068(0x200))]||'')+_0x34f068(0x208)+(_0x5d97b5[_0x508b0f['indexOf'](_0x34f068(0x207))]||'')+_0x34f068(0x208)+(_0x5d97b5[_0x508b0f[_0x34f068(0x21f)](_0x34f068(0x1ea))]||'')+_0x34f068(0x1f5),_0x10f434['appendChild'](_0x24176f);}),document[_0x3fc033(0x23d)](_0x3fc033(0x228))['classList'][_0x3fc033(0x25e)]('hidden',hwafezData['length']>0x0),document['getElementById'](_0x3fc033(0x25b))['scrollIntoView']({'behavior':_0x3fc033(0x20b)});}catch(_0x2e233f){console[_0x3fc033(0x1e4)]('❌\x20showHwafez\x20error:',_0x2e233f),alert(_0x3fc033(0x269));}}async function sendSupervisorNotification(){const _0x2c36e0=_0x2689f2;try{const _0x4c89dd=document[_0x2c36e0(0x23d)]('notifTitleInput')[_0x2c36e0(0x243)][_0x2c36e0(0x211)](),_0x173d31=document[_0x2c36e0(0x23d)]('notifBodyInput')[_0x2c36e0(0x243)]['trim']();if(!_0x4c89dd||!_0x173d31){alert(_0x2c36e0(0x244));return;}const _0xfe7545=await fetch(API_BASE+_0x2c36e0(0x253),{'method':_0x2c36e0(0x22c),'headers':{'Content-Type':_0x2c36e0(0x266),'Authorization':_0x2c36e0(0x1ef)+jwtToken},'body':JSON[_0x2c36e0(0x1f7)]({'title':_0x4c89dd,'body':_0x173d31})});if(!_0xfe7545['ok'])throw new Error(await _0xfe7545[_0x2c36e0(0x219)]());alert('✅\x20تم\x20إرسال\x20الإشعار\x20لجميع\x20المستخدمين.'),document[_0x2c36e0(0x23d)](_0x2c36e0(0x262))[_0x2c36e0(0x243)]='',document[_0x2c36e0(0x23d)](_0x2c36e0(0x20a))[_0x2c36e0(0x243)]='';}catch(_0x7c45a7){console[_0x2c36e0(0x1e4)](_0x2c36e0(0x256),_0x7c45a7),alert(_0x2c36e0(0x247)+_0x7c45a7[_0x2c36e0(0x201)]);}}function logout(){const _0xf1e21f=_0x2689f2;currentUser=null,jwtToken=null,localStorage[_0xf1e21f(0x234)](_0xf1e21f(0x1e5)),[_0xf1e21f(0x258),'pushSection',_0xf1e21f(0x25b)][_0xf1e21f(0x260)](_0x1ffb1b=>document[_0xf1e21f(0x23d)](_0x1ffb1b)['classList'][_0xf1e21f(0x203)](_0xf1e21f(0x241))),document[_0xf1e21f(0x23d)](_0xf1e21f(0x1e0))[_0xf1e21f(0x254)][_0xf1e21f(0x222)]('hidden');}
